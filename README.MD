# 单账号浏览器爬虫（学习级）README

> 本 README 用于指导你完成 **第一阶段：单账号 + 浏览器自动化** 的学习与工程实践。
>
> 目标不是“爬到最多数据”，而是**建立一个稳定、可理解、可扩展的基础模型**，为后续多账号方案打地基。

---

## 一、项目目标

### 🎯 核心目标

* 使用 **真实浏览器** 访问小红书公开分享链接
* 在 **已登录的单账号状态** 下获取页面内容
* 建立一条 **稳定、可复用、可观测** 的访问与抽取流程

### 🚫 非目标（刻意不做）

* 不做多账号
* 不做并发放大
* 不做风控对抗
* 不做接口逆向

> 本阶段只关注：**“一个账号，能否长期、稳定、可解释地工作”**

---

## 二、整体思路概览

```text
启动浏览器
   ↓
加载登录态（手动或已有 Cookie）
   ↓
打开分享链接
   ↓
等待页面稳定
   ↓
抽取内容
   ↓
记录结果与异常
```

关键词：

* 串行
* 可控
* 易调试

---

## 三、账号与登录策略

### 1️⃣ 单账号原则

* 仅使用 **一个真实账号**
* 账号由人工注册、人工使用
* 不做自动注册或批量账号管理

### 2️⃣ 登录方式建议

学习阶段推荐：

* 第一次 **人工登录浏览器**
* 保存 Cookie / Context
* 后续自动复用登录态

目标是：

> 学习如何“承载用户态”，而不是“破解登录流程”

---

## 四、浏览器与上下文设计

### 浏览器选择（建议）

* Playwright（推荐）
* Puppeteer
* Selenium（不推荐新项目）

### 上下文设计原则

* 使用 **持久化 Browser Context**
* Context = 当前唯一账号
* 所有访问都在同一个 Context 内完成

```text
Browser
 └── Context (Account A)
       └── Pages
```

---

## 五、页面访问规范

### 1️⃣ 访问范围

* 仅访问 **公开分享链接**
* 链接可在正常浏览器中直接打开

### 2️⃣ 访问节奏

* 串行访问
* 页面之间有自然间隔
* 不追求速度

### 3️⃣ 页面稳定判断

以以下条件之一作为“页面可用”：

* 关键 DOM 元素出现
* 页面无登录跳转
* 页面未出现明显异常提示

---

## 六、内容抽取策略（只做最小可用）

### 抽取目标（示例）

* 笔记正文文本
* 作者昵称
* 发布时间（如可获取）

### 抽取优先级

```text
1. 页面内嵌的 JS 状态对象
2. 浏览器 Network 中的公开响应
3. DOM 文本（兜底方案）
```

本阶段原则：

> **抽得少，但要稳定**

---

## 七、异常识别与处理（非常重要）

你需要显式区分以下情况：

### 常见异常类型

* 页面加载超时
* 跳转到登录页
* 页面结构异常
* 浏览器崩溃

### 处理原则

* 不强行重试
* 记录异常原因
* 允许任务失败

目标是：

> **先看清问题，再考虑解决问题**

---

## 八、日志与可观测性

建议至少记录：

* 访问的 URL
* 页面是否成功加载
* 抽取是否成功
* 异常类型
* 时间消耗

学习阶段日志的价值 > 数据本身

---

## 九、阶段完成标准（Check List）

当你满足以下条件，说明“单账号阶段”完成：

* [ ] 浏览器可稳定启动
* [ ] 登录态可被复用
* [ ] 分享链接可稳定打开
* [ ] 内容可重复抽取
* [ ] 异常可被识别与记录

---

## 十、下一阶段展望（不实现，仅认知）

在本阶段稳定后，下一步才是：

* 抽象账号对象
* 引入账号状态机
* 多 Context 管理
* 失败切换策略

> ⚠️ 如果单账号都不稳定，多账号只会放大问题。

---

## 十一、一句总结

> **单账号阶段不是“低级阶段”，而是整个系统最重要的地基。**
>
> 把这一阶段做到“稳定、可解释、可维护”，你后面的路会
